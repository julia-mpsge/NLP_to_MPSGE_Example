<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Issues with PATHSolver · NLP_to_MPSGE_Example.jl</title><meta name="title" content="Issues with PATHSolver · NLP_to_MPSGE_Example.jl"/><meta property="og:title" content="Issues with PATHSolver · NLP_to_MPSGE_Example.jl"/><meta property="twitter:title" content="Issues with PATHSolver · NLP_to_MPSGE_Example.jl"/><meta name="description" content="Documentation for NLP_to_MPSGE_Example.jl."/><meta property="og:description" content="Documentation for NLP_to_MPSGE_Example.jl."/><meta property="twitter:description" content="Documentation for NLP_to_MPSGE_Example.jl."/><meta property="og:url" content="https://github.com/julia-mpsge/NLP_to_MPSGE_Example/problems/"/><meta property="twitter:url" content="https://github.com/julia-mpsge/NLP_to_MPSGE_Example/problems/"/><link rel="canonical" href="https://github.com/julia-mpsge/NLP_to_MPSGE_Example/problems/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../problem_description/">NLP_to_MPSGE_Example.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><span class="tocitem">Introduction</span><ul><li><a class="tocitem" href="../problem_description/">Problem Description</a></li><li><a class="tocitem" href="../convert/">Conversion Process</a></li><li><a class="tocitem" href="../compare/">Comparing Models</a></li></ul></li><li><span class="tocitem">Issues</span><ul><li class="is-active"><a class="tocitem" href>Issues with PATHSolver</a><ul class="internal"><li><a class="tocitem" href="#Demonstration-of-the-Issue"><span>Demonstration of the Issue</span></a></li><li><a class="tocitem" href="#Temporary-Solution"><span>Temporary Solution</span></a></li></ul></li></ul></li><li><span class="tocitem">API Reference</span><ul><li><a class="tocitem" href="../docs/">API Reference</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Issues</a></li><li class="is-active"><a href>Issues with PATHSolver</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Issues with PATHSolver</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/julia-mpsge/NLP_to_MPSGE_Example" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/julia-mpsge/NLP_to_MPSGE_Example/blob/main/problems.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Issues-with-PATHSolver"><a class="docs-heading-anchor" href="#Issues-with-PATHSolver">Issues with PATHSolver</a><a id="Issues-with-PATHSolver-1"></a><a class="docs-heading-anchor-permalink" href="#Issues-with-PATHSolver" title="Permalink"></a></h1><p>While writing and debugging this model I found an issue that I think should be reported. The issue is that when using subexpressions in a PATHSolver MCP model, the solver fails to find a solution even when the same model without subexpressions solves fine. This issue also appears in MPSGE models, which use subexpressions by default.</p><pre><code class="language-julia hljs">using NLP_to_MPSGE_Example
using JuMP, MPSGE, DataFrames</code></pre><p>Initialize the data</p><pre><code class="language-julia hljs">data = ModelData()</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">ModelData(25.0, 25.0, 100.0, 100.0, 75.0, 75.0, 1.0, 1.0, 1.0, 1.0)</code></pre><p>Initialize the models</p><pre><code class="language-julia hljs">nlp = NLP_model(data)
mcp = MCP_model(data)
mcp_sub = MCP_model(data; subexpressions = true)
mpsge = MPSGE_model(data)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">$Parameters:
PWE
TD
sigma
BBAR
TM
TE
PWM
omega

$Sectors:
X
Q

$Commodities:
PQ
PDD
PFX
PX

$Consumers:
Y

$Production: Q
:t = 0
  O:PQ    Q:100.0

:s = sigma
  I:PFX    Q:25 PWM    P:1.0 / PWM    A:Y    T:TM
  I:PDD    Q:75.0    A:Y    T:TD

$Production: X
:t = omega
  O:PFX    Q:25 PWE    P:1.0 / PWE    A:Y    T:-TE
  O:PDD    Q:75.0

:s = 0
  I:PX    Q:100.0


$Demand: Y
    D: PQ    Q: 100.0
    E: PFX    Q: BBAR
    E: PX    Q: 100.0

</code></pre><p>Notice that we have two versions of the MCP model, one with subexpressions and one without. This is going to demonstrate an issue with the PATHSolver when subexpressions are used.</p><h2 id="Demonstration-of-the-Issue"><a class="docs-heading-anchor" href="#Demonstration-of-the-Issue">Demonstration of the Issue</a><a id="Demonstration-of-the-Issue-1"></a><a class="docs-heading-anchor-permalink" href="#Demonstration-of-the-Issue" title="Permalink"></a></h2><p>To demonstrate the issue, we will set a counterfactual scenario with a fairly large shock to the parameters, then attempt to solve all four models. This is the smallest shock I could find that causes the issue to appear.</p><pre><code class="language-julia hljs">params = ModelParameters(
    elas_substitution = .2,
    elas_transformation = 15,
    balance_of_payments = 10,
    price_world_export = 1.2,
    price_world_import = 1.1,
    tax_domestic = .5,
    subsidy_export = .2,
    tax_import = .1
    );


set_parameter_values(nlp, params)
set_parameter_values(mcp, params)
set_parameter_values(mcp_sub, params)
set_parameter_values(mpsge, params)</code></pre><p>The NLP model solves fine.</p><pre><code class="language-julia hljs">optimize!(nlp)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">This is Ipopt version 3.14.19, running with linear solver MUMPS 5.8.1.

Number of nonzeros in equality constraint Jacobian...:       48
Number of nonzeros in inequality constraint Jacobian.:        0
Number of nonzeros in Lagrangian Hessian.............:       32

Total number of variables............................:       14
                     variables with only lower bounds:       12
                variables with lower and upper bounds:        0
                     variables with only upper bounds:        0
Total number of equality constraints.................:       14
Total number of inequality constraints...............:        0
        inequality constraints with only lower bounds:        0
   inequality constraints with lower and upper bounds:        0
        inequality constraints with only upper bounds:        0

iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
   0  1.0000000e+02 3.42e+01 1.00e+00  -1.0 0.00e+00    -  0.00e+00 0.00e+00   0
   1  1.1080262e+02 1.74e+00 8.94e-01  -1.0 3.16e+01    -  8.38e-01 1.00e+00f  1
   2  1.1013233e+02 1.05e-01 3.46e-01  -1.0 1.89e+00    -  9.74e-01 1.00e+00h  1
   3  1.1009540e+02 2.24e-04 3.54e-03  -1.7 3.69e-02    -  1.00e+00 1.00e+00h  1
   4  1.1009540e+02 1.19e-09 3.01e-14  -3.8 4.12e-06    -  1.00e+00 1.00e+00h  1

Number of Iterations....: 4

                                   (scaled)                 (unscaled)
Objective...............:  -1.1009539658140858e+02    1.1009539658140858e+02
Dual infeasibility......:   3.0113395365171019e-14    3.0113395365171019e-14
Constraint violation....:   3.1753965383056021e-10    1.1907737018646003e-09
Variable bound violation:   0.0000000000000000e+00    0.0000000000000000e+00
Complementarity.........:   0.0000000000000000e+00    0.0000000000000000e+00
Overall NLP error.......:   3.1753965383056021e-10    1.1907737018646003e-09


Number of objective function evaluations             = 5
Number of objective gradient evaluations             = 5
Number of equality constraint evaluations            = 5
Number of inequality constraint evaluations          = 0
Number of equality constraint Jacobian evaluations   = 5
Number of inequality constraint Jacobian evaluations = 0
Number of Lagrangian Hessian evaluations             = 4
Total seconds in IPOPT                               = 0.002

EXIT: Optimal Solution Found.</code></pre><p>As does the MCP model without subexpressions.</p><pre><code class="language-julia hljs">optimize!(mcp)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Path 5.0.03 (Fri Jun 26 09:54:13 2020)
Written by Todd Munson, Steven Dirkse, Youngdae Kim, and Michael Ferris

Preprocessed size   : 6

Crash Log
major  func  diff  size  residual    step       prox   (label)
    0     0             1.4870e+02             0.0e+00 (mc_PD)
    1     2     0     6 1.4244e+02  8.0e-01    0.0e+00 (income_balanc)
pn_search terminated: no basis change.

Major Iteration Log
major minor  func  grad  residual    step  type prox    inorm  (label)
    0     0     3     2 1.4244e+02           I 0.0e+00 1.2e+02 (income_balanc)
    1     1     4     3 2.0601e+02  1.0e+00 SM 0.0e+00 2.0e+02 (mc_PD)
    2     2     5     4 -nan  1.0e+00 SD 0.0e+00 1.7e+01 (mc_PD)
    3     2     6     5 1.8629e+00  1.0e+00 RD -nan 1.9e+00 (zp_)
    4     1     7     6 1.0899e+00  1.0e+00 SD 1.9e-01 1.1e+00 (zp_)
    5     1     8     7 1.0264e+00  1.0e+00 SD 7.5e-02 1.0e+00 (zp_)
    6     1     9     8 1.0095e+00  1.0e+00 SD 3.0e-02 1.0e+00 (zp_)
    7     1    10     9 1.0037e+00  1.0e+00 SD 1.2e-02 1.0e+00 (zp_)
    8     1    11    10 1.0014e+00  1.0e+00 SD 4.8e-03 1.0e+00 (zp_)
    9     1    12    11 1.0006e+00  1.0e+00 SD 1.9e-03 1.0e+00 (zp_)
   10     1    14    12 2.4692e+01  8.0e-01 SW 0.0e+00 2.0e+01 (income_balanc)
   11     2    15    13 -nan  1.0e+00 SD 0.0e+00 5.9e+00 (zp_)
   12     1    16    14 2.0000e+00  1.0e+00 SD -nan 2.0e+00 (zp_)
   13     1    17    15 1.0990e+00  1.0e+00 SD 2.0e-01 1.1e+00 (zp_)
   14     1    18    16 1.0285e+00  1.0e+00 SD 8.0e-02 1.0e+00 (zp_)
   15     1    19    17 1.0103e+00  1.0e+00 SD 3.2e-02 1.0e+00 (zp_)
   16     1    20    18 1.0039e+00  1.0e+00 SD 1.3e-02 1.0e+00 (zp_)
   17     1    21    19 1.0016e+00  1.0e+00 SD 5.1e-03 1.0e+00 (zp_)
   18     1    22    20 1.0006e+00  1.0e+00 SD 2.0e-03 1.0e+00 (zp_)
   19     1    24    21 1.8833e+02  8.0e-01 SW 0.0e+00 1.9e+02 (mc_PD)
   20     2    25    22 -nan  1.0e+00 SD 0.0e+00 6.9e+01 (mc_PD)
   21     2    26    23 1.5585e+00  1.0e+00 RD -nan 1.6e+00 (zp_)
   22     1    27    24 1.0707e+00  1.0e+00 SD 1.6e-01 1.1e+00 (zp_)
   23     1    28    25 1.0217e+00  1.0e+00 SD 6.2e-02 1.0e+00 (zp_)
   24     1    29    26 1.0079e+00  1.0e+00 SD 2.5e-02 1.0e+00 (zp_)
   25     1    30    27 1.0031e+00  1.0e+00 SD 1.0e-02 1.0e+00 (zp_)
   26     1    31    28 1.0012e+00  1.0e+00 SD 4.0e-03 1.0e+00 (zp_)
   27     1    32    29 1.0005e+00  1.0e+00 SD 1.6e-03 1.0e+00 (zp_)
   28     1    34    30 7.1713e+01  8.0e-01 SW 0.0e+00 6.6e+01 (mc_PD)
   29     1    35    31 1.1612e+01  1.0e+00 SO 0.0e+00 1.1e+01 (mc_PF)
   30     1    36    32 9.8109e-01  1.0e+00 SO 0.0e+00 9.1e-01 (mc_PD)
   31     1    37    33 1.0770e-02  1.0e+00 SO 0.0e+00 7.9e-03 (mc_PF)
   32     1    38    34 1.3049e-06  1.0e+00 SO 0.0e+00 9.6e-07 (mc_PF)
   33     1    39    35 1.9342e-13  1.0e+00 SO 0.0e+00 1.8e-13 (mc_PD)

Major Iterations. . . . 33
Minor Iterations. . . . 38
Restarts. . . . . . . . 0
Crash Iterations. . . . 1
Gradient Steps. . . . . 0
Function Evaluations. . 39
Gradient Evaluations. . 35
Basis Time. . . . . . . 0.000077
Total Time. . . . . . . 0.007093
Residual. . . . . . . . 1.934192e-13
Postsolved residual: 1.9342e-13</code></pre><p>However, the MCP model with subexpressions fails to solve.</p><pre><code class="language-julia hljs">optimize!(mcp_sub)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Path 5.0.03 (Fri Jun 26 09:54:13 2020)
Written by Todd Munson, Steven Dirkse, Youngdae Kim, and Michael Ferris

Preprocessed size   : 10

Crash Log
major  func  diff  size  residual    step       prox   (label)
    0     0             9.6385e+01             0.0e+00 (income_balanc)
pn_search terminated: no progress.

Major Iteration Log
major minor  func  grad  residual    step  type prox    inorm  (label)
    0     0    13     1 9.6385e+01           I 0.0e+00 9.6e+01 (income_balanc)
    1     1    14     2 1.0296e+03  1.0e+00 SD 0.0e+00 7.8e+02 (income_balanc)
    2     1    19     3 4.2355e+02  3.3e-01 SW 0.0e+00 4.2e+02 (income_balanc)
    3     3    20     4 3.4417e+02  1.0e+00 RO 0.0e+00 3.4e+02 (income_balanc)
    4     5    21     5 3.4417e+02  1.0e+00 RO 0.0e+00 3.4e+02 (income_balanc)
    5     3    22     6 3.4417e+02  1.0e+00 RO 0.0e+00 3.4e+02 (income_balanc)
    6     5    23     7 3.4417e+02  1.0e+00 RO 0.0e+00 3.4e+02 (income_balanc)
    7     3    24     8 3.4417e+02  1.0e+00 RO 0.0e+00 3.4e+02 (income_balanc)
    8     6    38     9 9.5363e+01  1.5e-06 RG 0.0e+00 9.5e+01 (income_balanc)
    9     1    39    10 8.2199e+02  1.0e+00 SD 0.0e+00 6.0e+02 (income_balanc)
   10     1    43    11 4.0194e+02  5.1e-01 SW 0.0e+00 4.0e+02 (income_balanc)
   11     3    44    12 3.4254e+02  1.0e+00 RO 0.0e+00 3.4e+02 (income_balanc)
   12     6    45    13 3.4254e+02  1.0e+00 RO 0.0e+00 3.4e+02 (income_balanc)
   13     3    46    14 3.4254e+02  1.0e+00 RO 0.0e+00 3.4e+02 (income_balanc)
   14     6    47    15 3.4254e+02  1.0e+00 RO 0.0e+00 3.4e+02 (income_balanc)
   15     3    48    16 3.4254e+02  1.0e+00 RO 0.0e+00 3.4e+02 (income_balanc)
   16     6    61    17 6.5883e+01  5.4e-05 RG 0.0e+00 6.6e+01 (income_balanc)
   17     1    68    18 2.9603e+02  1.3e-01 SB 0.0e+00 3.0e+02 (income_balanc)
   18     3    69    19 7.8197e+01  1.0e+00 RO 0.0e+00 7.8e+01 (income_balanc)
   19     5    70    20 7.8197e+01  1.0e+00 RO 0.0e+00 7.8e+01 (income_balanc)
   20     3    71    21 7.8197e+01  1.0e+00 RO 0.0e+00 7.8e+01 (income_balanc)
   21     5    72    22 7.8197e+01  1.0e+00 RO 0.0e+00 7.8e+01 (income_balanc)
   22     3    73    23 7.8197e+01  1.0e+00 RO 0.0e+00 7.8e+01 (income_balanc)
   23     6    84    24 2.5324e+01  1.9e-03 RG 0.0e+00 2.3e+01 (Revenue_)

Restart Log
proximal_perturbation 0
crash_method none
crash_perturb yes
nms_initial_reference_factor 2
lemke_start_type slack
proximal_perturbation 1.0000e-01

Major Iteration Log
major minor  func  grad  residual    step  type prox    inorm  (label)
   23     0   116    25 9.6385e+01           R 1.0e-01 9.6e+01 (income_balanc)
   24     1   117    26 1.0839e+03  1.0e+00 SD 4.0e-02 8.0e+02 (income_balanc)
   25     1   126    27 1.2462e+02  2.3e-02 SW 4.0e-02 1.2e+02 (income_balanc)
   26     1   127    28 1.1294e+03  1.0e+00 SD 1.6e-02 8.2e+02 (mc_PF)
   27     1   137    29 1.3594e+02  9.2e-03 SW 4.0e-02 1.4e+02 (income_balanc)
   28     1   138    30 1.1773e+03  1.0e+00 SD 1.6e-02 8.9e+02 (mc_PF)
   29     1   150    31 1.3625e+02  2.6e-04 SW 4.0e-02 1.4e+02 (income_balanc)
   30     1   151    32 1.1787e+03  1.0e+00 SD 1.6e-02 8.9e+02 (mc_PF)
   31     1   164    33 1.3630e+02  4.4e-05 SW 4.0e-02 1.4e+02 (income_balanc)
   32     1   165    34 1.1789e+03  1.0e+00 SD 1.6e-02 8.9e+02 (mc_PF)
   33     1   179    35 1.3630e+02  1.2e-06 SW 4.0e-02 1.4e+02 (income_balanc)
   34     1   180    36 1.1789e+03  1.0e+00 SD 1.6e-02 8.9e+02 (mc_PF)

Restart Log
proximal_perturbation 0
crash_method none
crash_perturb no
nms_initial_reference_factor 10
nms_memory_size 2
nms_mstep_frequency 1
lemke_search_type slack

Major Iteration Log
major minor  func  grad  residual    step  type prox    inorm  (label)
   34     0   182    37 9.6385e+01           R 0.0e+00 9.6e+01 (income_balanc)
   35     1   189    38 2.5876e+02  1.3e-01 SB 0.0e+00 2.6e+02 (income_balanc)
   36     1   198    39 3.0000e+02  2.3e-02 SB 0.0e+00 3.0e+02 (income_balanc)
   37     7   226    40 9.5363e+01  1.5e-06 RG 0.0e+00 9.5e+01 (income_balanc)
   38     1   253    41 6.5883e+01  5.4e-05 SG 0.0e+00 6.6e+01 (income_balanc)
   39     1   261    42 7.4484e+00  5.5e-02 SB 0.0e+00 7.1e+00 (income_balanc)
   40     1   270    43 5.8414e+01  2.3e-02 SB 0.0e+00 5.8e+01 (income_balanc)
   41     1   299    44 6.7980e+00  4.3e-08 SG 0.0e+00 6.4e+00 (income_balanc)
   42     1   309    45 3.7658e+00  9.2e-03 SB 0.0e+00 3.0e+00 (income_balanc)
   43     1   320    46 4.0714e+00  1.5e-03 SB 0.0e+00 3.4e+00 (income_balanc)
   44     1   334    47 4.0714e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   45     1   348    48 4.0714e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   46     1   362    49 4.0714e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   47     1   376    50 4.0714e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   48     1   390    51 4.0714e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   49     1   404    52 4.0714e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   50     1   418    53 4.0714e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   51     1   432    54 4.0714e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   52     1   446    55 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   53     1   460    56 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   54     1   474    57 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   55     1   488    58 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   56     1   502    59 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   57     1   516    60 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   58     1   530    61 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   59     1   544    62 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   60     1   558    63 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   61     1   572    64 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   62     1   586    65 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   63     1   600    66 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   64     1   614    67 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   65     1   628    68 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   66     1   642    69 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   67     1   656    70 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   68     1   670    71 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   69     1   684    72 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   70     1   698    73 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   71     1   712    74 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   72     1   726    75 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   73     1   740    76 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   74     1   754    77 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   75     1   768    78 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   76     1   782    79 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   77     1   796    80 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   78     1   810    81 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   79     1   824    82 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   80     1   838    83 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   81     1   852    84 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   82     1   866    85 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   83     1   880    86 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   84     1   894    87 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   85     1   908    88 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   86     1   922    89 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   87     1   936    90 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   88     1   950    91 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   89     1   964    92 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   90     1   978    93 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   91     1   992    94 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   92     1  1006    95 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   93     1  1020    96 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   94     1  1034    97 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   95     1  1048    98 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   96     1  1062    99 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   97     1  1076   100 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   98     1  1090   101 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
   99     1  1104   102 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  100     1  1118   103 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  101     1  1132   104 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  102     1  1146   105 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  103     1  1160   106 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  104     1  1174   107 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  105     1  1188   108 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  106     1  1202   109 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  107     1  1216   110 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  108     1  1230   111 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  109     1  1244   112 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  110     1  1258   113 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  111     1  1272   114 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  112     1  1286   115 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  113     1  1300   116 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  114     1  1314   117 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  115     1  1328   118 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  116     1  1342   119 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  117     1  1356   120 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  118     1  1370   121 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  119     1  1384   122 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  120     1  1398   123 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  121     1  1412   124 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  122     1  1426   125 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  123     1  1440   126 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  124     1  1454   127 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  125     1  1468   128 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  126     1  1482   129 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  127     1  1496   130 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  128     1  1510   131 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  129     1  1524   132 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  130     1  1538   133 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  131     1  1552   134 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  132     1  1566   135 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  133     1  1580   136 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  134     1  1594   137 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  135     1  1608   138 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  136     1  1622   139 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  137     1  1636   140 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  138     1  1650   141 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  139     1  1664   142 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)

Restart Log
proximal_perturbation 0
crash_method pnewton
crash_nbchange_limit 10
nms_initial_reference_factor 2
crash_searchtype arc
nms_searchtype arc
gradient_searchtype arc
lemke_search_type slack

Crash Log
major  func  diff  size  residual    step       prox   (label)
    0     0             9.6385e+01             0.0e+00 (income_balanc)
pn_search terminated: no progress.

Major Iteration Log
major minor  func  grad  residual    step  type prox    inorm  (label)
  139     0  1691   144 9.6385e+01           R 0.0e+00 9.6e+01 (income_balanc)
  140     1  1700   145 1.2606e+02  2.3e-02 SB 0.0e+00 1.3e+02 (income_balanc)
  141     1  1711   146 1.2809e+02  1.5e-03 SB 0.0e+00 1.3e+02 (income_balanc)
  142     1  1739   147 9.5363e+01  1.5e-06 SG 0.0e+00 9.5e+01 (income_balanc)
  143     1  1766   148 6.5883e+01  5.4e-05 SG 0.0e+00 6.6e+01 (income_balanc)
  144     1  1774   149 7.4484e+00  5.5e-02 SB 0.0e+00 7.1e+00 (income_balanc)
  145     1  1783   150 5.8414e+01  2.3e-02 SB 0.0e+00 5.8e+01 (income_balanc)
  146     1  1812   151 6.7980e+00  4.3e-08 SG 0.0e+00 6.4e+00 (income_balanc)
  147     1  1822   152 3.7658e+00  9.2e-03 SB 0.0e+00 3.0e+00 (income_balanc)
  148     1  1833   153 4.0714e+00  1.5e-03 SB 0.0e+00 3.4e+00 (income_balanc)
  149     1  1847   154 4.0714e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  150     1  1861   155 4.0714e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  151     1  1875   156 4.0714e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  152     1  1889   157 4.0714e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  153     1  1903   158 4.0714e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  154     1  1917   159 4.0714e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  155     1  1931   160 4.0714e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  156     1  1945   161 4.0714e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  157     1  1959   162 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  158     1  1973   163 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  159     1  1987   164 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  160     1  2001   165 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  161     1  2015   166 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  162     1  2029   167 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  163     1  2043   168 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  164     1  2057   169 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  165     1  2071   170 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  166     1  2085   171 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  167     1  2099   172 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  168     1  2113   173 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  169     1  2127   174 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  170     1  2141   175 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  171     1  2155   176 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  172     1  2169   177 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  173     1  2183   178 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  174     1  2197   179 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  175     1  2211   180 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  176     1  2225   181 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  177     1  2239   182 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  178     1  2253   183 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  179     1  2267   184 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  180     1  2281   185 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  181     1  2295   186 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  182     1  2309   187 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  183     1  2323   188 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  184     1  2337   189 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  185     1  2351   190 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  186     1  2365   191 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  187     1  2379   192 4.0713e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  188     1  2393   193 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  189     1  2407   194 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  190     1  2421   195 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  191     1  2435   196 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  192     1  2449   197 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  193     1  2463   198 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  194     1  2477   199 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  195     1  2491   200 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  196     1  2505   201 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  197     1  2519   202 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  198     1  2533   203 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  199     1  2547   204 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  200     1  2561   205 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  201     1  2575   206 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  202     1  2589   207 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  203     1  2603   208 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  204     1  2617   209 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  205     1  2631   210 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  206     1  2645   211 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  207     1  2659   212 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  208     1  2673   213 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  209     1  2687   214 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  210     1  2701   215 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  211     1  2715   216 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  212     1  2729   217 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  213     1  2743   218 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  214     1  2757   219 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  215     1  2771   220 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  216     1  2785   221 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  217     1  2799   222 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  218     1  2813   223 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  219     1  2827   224 4.0712e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  220     1  2841   225 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  221     1  2855   226 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  222     1  2869   227 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  223     1  2883   228 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  224     1  2897   229 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  225     1  2911   230 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  226     1  2925   231 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  227     1  2939   232 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  228     1  2953   233 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  229     1  2967   234 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  230     1  2981   235 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  231     1  2995   236 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  232     1  3009   237 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  233     1  3023   238 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  234     1  3037   239 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  235     1  3051   240 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  236     1  3065   241 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  237     1  3079   242 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  238     1  3093   243 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  239     1  3107   244 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  240     1  3121   245 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  241     1  3135   246 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  242     1  3149   247 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  243     1  3163   248 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)
  244     1  3177   249 4.0711e+00  1.2e-06 SB 0.0e+00 3.4e+00 (income_balanc)

Major Iterations. . . . 244
Minor Iterations. . . . 314
Restarts. . . . . . . . 3
Crash Iterations. . . . 0
Gradient Steps. . . . . 9
Function Evaluations. . 3191
Gradient Evaluations. . 250
Basis Time. . . . . . . 0.000860
Total Time. . . . . . . 0.023931
Residual. . . . . . . . 3.765824e+00
Postsolved residual: 3.7658e+00</code></pre><p>This MPSGE model uses subexpressions, so it also fails to solve.</p><pre><code class="language-julia hljs">solve!(mpsge)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Reading options file /tmp/jl_kYwve9
 &gt; cumulative_iteration_limit 10000
Read of options file complete.

Path 5.0.03 (Fri Jun 26 09:54:13 2020)
Written by Todd Munson, Steven Dirkse, Youngdae Kim, and Michael Ferris

Preprocessed size   : 10

Crash Log
major  func  diff  size  residual    step       prox   (label)
    0     0             1.4567e+00             0.0e+00 (m_c[PFX)
    1     4     0     9 1.2020e+00  4.1e-01    0.0e+00 (m_c[PDD)
pn_search terminated: no basis change.

Major Iteration Log
major minor  func  grad  residual    step  type prox    inorm  (label)
    0     0     5     2 1.2020e+00           I 0.0e+00 9.4e-01 (m_c[PDD)
    1     8    16     3 3.8254e+00  1.5e-03 RB 0.0e+00 3.6e+00 (i_b[Y)
    2     3    17     4 1.1976e+00  1.0e+00 RO 0.0e+00 9.4e-01 (m_c[PDD)
    3     5    18     5 1.1976e+00  1.0e+00 RO 0.0e+00 9.4e-01 (m_c[PDD)
    4     2    19     6 1.1976e+00  1.0e+00 RO 0.0e+00 9.4e-01 (m_c[PDD)
    5     2    20     7 1.1976e+00  1.0e+00 RO 0.0e+00 9.4e-01 (m_c[PDD)
    6     8    31     8 1.1951e+00  1.9e-03 RG 0.0e+00 9.3e-01 (m_c[PDD)
    7     4    32     9 1.1951e+00  1.0e+00 RO 0.0e+00 9.3e-01 (m_c[PDD)
    8     6    33    10 1.1890e+00  1.0e+00 RO 0.0e+00 9.3e-01 (m_c[PDD)
    9     4    34    11 1.1890e+00  1.0e+00 RO 0.0e+00 9.3e-01 (m_c[PDD)
   10     4    35    12 1.1890e+00  1.0e+00 RO 0.0e+00 9.3e-01 (m_c[PDD)
   11     8    46    13 3.4537e+00  1.5e-03 RB 0.0e+00 3.2e+00 (i_b[Y)
   12     5    59    14 1.1868e+00  5.4e-05 RG 0.0e+00 9.3e-01 (m_c[PDD)
   13     6    60    15 1.1868e+00  1.0e+00 RO 0.0e+00 9.3e-01 (m_c[PDD)
   14     4    61    16 1.1868e+00  1.0e+00 RO 0.0e+00 9.3e-01 (m_c[PDD)
   15     4    62    17 1.1868e+00  1.0e+00 RO 0.0e+00 9.3e-01 (m_c[PDD)
   16     8    75    18 1.1903e+00  4.4e-05 RB 0.0e+00 9.3e-01 (m_c[PDD)
   17     5    76    19 1.1903e+00  1.0e+00 RO 0.0e+00 9.3e-01 (m_c[PDD)
   18     5    89    20 1.1865e+00  5.4e-05 RG 0.0e+00 9.3e-01 (m_c[PDD)
   19     4    90    21 1.1865e+00  1.0e+00 RO 0.0e+00 9.3e-01 (m_c[PDD)
   20     6    91    22 1.1865e+00  1.0e+00 RO 0.0e+00 9.3e-01 (m_c[PDD)
   21     8   105    23 1.1865e+00  1.2e-06 RB 0.0e+00 9.3e-01 (m_c[PDD)
   22     5   106    24 1.1865e+00  1.0e+00 RO 0.0e+00 9.3e-01 (m_c[PDD)
   23     5   107    25 1.1865e+00  1.0e+00 RO 0.0e+00 9.3e-01 (m_c[PDD)
   24     5   119    26 1.1860e+00  3.2e-04 RG 0.0e+00 9.3e-01 (m_c[PDD)
   25     2   120    27 1.1860e+00  1.0e+00 RO 0.0e+00 9.3e-01 (m_c[PDD)
   26     8   134    28 1.1860e+00  1.2e-06 RB 0.0e+00 9.3e-01 (m_c[PDD)
   27     4   135    29 1.1867e+00  1.0e+00 RO 0.0e+00 9.3e-01 (m_c[PDD)
   28     3   136    30 1.1867e+00  1.0e+00 RO 0.0e+00 9.3e-01 (m_c[PDD)
   29     4   137    31 1.1867e+00  1.0e+00 RD 0.0e+00 9.3e-01 (m_c[PDD)
   30     3   150    32 1.1856e+00  5.4e-05 RG 0.0e+00 9.3e-01 (m_c[PDD)
   31     8   164    33 1.1856e+00  1.2e-06 RB 0.0e+00 9.3e-01 (m_c[PDD)
   32     3   165    34 1.1856e+00  1.0e+00 RO 0.0e+00 9.3e-01 (m_c[PDD)
   33     4   166    35 1.1865e+00  1.0e+00 RD 0.0e+00 9.3e-01 (m_c[PDD)
   34     3   167    36 1.1865e+00  1.0e+00 RD 0.0e+00 9.3e-01 (m_c[PDD)
   35     3   168    37 1.1865e+00  1.0e+00 RD 0.0e+00 9.3e-01 (m_c[PDD)

Restart Log
proximal_perturbation 0
crash_method none
crash_perturb yes
nms_initial_reference_factor 2
lemke_start_type slack
proximal_perturbation 1.4567e-02

Major Iteration Log
major minor  func  grad  residual    step  type prox    inorm  (label)
   35     0   181    38 1.4567e+00           R 1.5e-02 1.0e+00 (m_c[PFX)
   36     2   193    39 1.5117e+00  2.6e-04 SB 5.8e-03 1.0e+00 (m_c[PFX)
   37     1   205    40 1.6650e+00  2.6e-04 SB 2.3e-03 1.0e+00 (m_c[PFX)
   38     1   217    41 1.8924e+00  2.6e-04 SB 9.3e-04 1.2e+00 (i_b[Y)
   39     1   230    42 1.9361e+00  4.4e-05 SB 3.7e-04 1.3e+00 (i_b[Y)
   40     1   243    43 1.9810e+00  4.4e-05 SB 1.5e-04 1.3e+00 (i_b[Y)
   41     1   256    44 2.0272e+00  4.4e-05 SB 6.0e-05 1.4e+00 (i_b[Y)
   42     1   270    45 2.0286e+00  1.2e-06 SB 2.4e-05 1.4e+00 (i_b[Y)
   43     1   284    46 2.0299e+00  1.2e-06 SB 9.5e-06 1.4e+00 (i_b[Y)
   44     1   298    47 2.0312e+00  1.2e-06 SB 3.8e-06 1.4e+00 (i_b[Y)
   45     1   312    48 2.0325e+00  1.2e-06 SB 1.5e-06 1.4e+00 (i_b[Y)
   46     1   339    49 1.4334e+00  5.4e-05 SG 5.8e-03 1.0e+00 (m_c[PFX)
   47     2   354    50 1.4334e+00  3.5e-08 SB 2.3e-03 1.0e+00 (m_c[PFX)
   48     1   369    51 1.4334e+00  3.5e-08 SB 9.3e-04 1.0e+00 (m_c[PFX)
   49     1   384    52 1.4334e+00  3.5e-08 SB 3.7e-04 1.0e+00 (m_c[PFX)
   50     1   399    53 1.4334e+00  3.5e-08 SB 1.5e-04 1.0e+00 (m_c[PFX)
   51     1   414    54 1.4334e+00  3.5e-08 SB 6.0e-05 1.0e+00 (m_c[PFX)
   52     1   429    55 1.4334e+00  3.5e-08 SB 2.4e-05 1.0e+00 (m_c[PFX)
   53     1   444    56 1.4334e+00  3.5e-08 SB 9.5e-06 1.0e+00 (m_c[PFX)
   54     1   459    57 1.4334e+00  3.5e-08 SB 3.8e-06 1.0e+00 (m_c[PFX)
   55     1   474    58 1.4334e+00  3.5e-08 SB 1.5e-06 1.0e+00 (m_c[PFX)
   56     1   489    59 1.4334e+00  3.5e-08 SB 6.1e-07 1.0e+00 (m_c[PFX)
   57     1   504    60 1.4334e+00  3.5e-08 SB 2.4e-07 1.0e+00 (m_c[PFX)
   58     1   519    61 1.4334e+00  3.5e-08 SB 9.8e-08 1.0e+00 (m_c[PFX)
   59     1   534    62 1.4334e+00  3.5e-08 SB 3.9e-08 1.0e+00 (m_c[PFX)
   60     1   549    63 1.4334e+00  3.5e-08 SB 1.6e-08 1.0e+00 (m_c[PFX)
   61     1   564    64 1.4334e+00  3.5e-08 SB 6.3e-09 1.0e+00 (m_c[PFX)
   62     1   579    65 1.4334e+00  3.5e-08 SB 2.5e-09 1.0e+00 (m_c[PFX)
   63     1   594    66 1.4334e+00  3.5e-08 SB 1.0e-09 1.0e+00 (m_c[PFX)
   64     1   609    67 1.4334e+00  3.5e-08 SB 4.0e-10 1.0e+00 (m_c[PFX)
   65     1   624    68 1.4334e+00  3.5e-08 SB 1.6e-10 1.0e+00 (m_c[PFX)
   66     1   639    69 1.4334e+00  3.5e-08 SB 6.4e-11 1.0e+00 (m_c[PFX)
   67     1   654    70 1.4334e+00  3.5e-08 SB 2.6e-11 1.0e+00 (m_c[PFX)
   68     1   681    71 1.2656e+00  5.4e-05 SG 1.0e-09 1.0e+00 (m_c[PFX)
   69     1   709    72 1.1687e+00  1.5e-06 SG 4.0e-10 1.0e+00 (m_c[PFX)
   70     1   738    73 1.1666e+00  4.3e-08 SG 1.6e-10 1.0e+00 (m_c[PFX)
   71     1   767    74 1.1646e+00  4.3e-08 SG 6.4e-11 1.0e+00 (m_c[PFX)

Restart Log
proximal_perturbation 0
crash_method none
crash_perturb no
nms_initial_reference_factor 10
nms_memory_size 2
nms_mstep_frequency 1
lemke_search_type slack

Major Iteration Log
major minor  func  grad  residual    step  type prox    inorm  (label)
   71     0   797    75 1.4567e+00           R 0.0e+00 1.0e+00 (m_c[PFX)
   72     2   808    76 2.7983e+00  1.5e-03 SB 0.0e+00 2.4e+00 (i_b[Y)
   73     1   820    77 3.1473e+00  2.6e-04 SB 0.0e+00 2.8e+00 (i_b[Y)
   74     1   847    78 1.4334e+00  5.4e-05 SG 0.0e+00 1.0e+00 (m_c[PFX)
   75     2   862    79 1.4334e+00  3.5e-08 SB 0.0e+00 1.0e+00 (m_c[PFX)
   76     1   877    80 1.4334e+00  3.5e-08 SB 0.0e+00 1.0e+00 (m_c[PFX)
   77     1   892    81 1.4334e+00  3.5e-08 SB 0.0e+00 1.0e+00 (m_c[PFX)
   78     1   907    82 1.4334e+00  3.5e-08 SB 0.0e+00 1.0e+00 (m_c[PFX)
   79     1   922    83 1.4334e+00  3.5e-08 SB 0.0e+00 1.0e+00 (m_c[PFX)
   80     1   937    84 1.4334e+00  3.5e-08 SB 0.0e+00 1.0e+00 (m_c[PFX)
   81     1   952    85 1.4334e+00  3.5e-08 SB 0.0e+00 1.0e+00 (m_c[PFX)
   82     1   967    86 1.4334e+00  3.5e-08 SB 0.0e+00 1.0e+00 (m_c[PFX)
   83     1   982    87 1.4334e+00  3.5e-08 SB 0.0e+00 1.0e+00 (m_c[PFX)
   84     1   997    88 1.4334e+00  3.5e-08 SB 0.0e+00 1.0e+00 (m_c[PFX)
   85     1  1012    89 1.4334e+00  3.5e-08 SB 0.0e+00 1.0e+00 (m_c[PFX)
   86     1  1027    90 1.4334e+00  3.5e-08 SB 0.0e+00 1.0e+00 (m_c[PFX)
   87     1  1042    91 1.4334e+00  3.5e-08 SB 0.0e+00 1.0e+00 (m_c[PFX)
   88     1  1057    92 1.4334e+00  3.5e-08 SB 0.0e+00 1.0e+00 (m_c[PFX)
   89     1  1072    93 1.4334e+00  3.5e-08 SB 0.0e+00 1.0e+00 (m_c[PFX)
   90     1  1087    94 1.4334e+00  3.5e-08 SB 0.0e+00 1.0e+00 (m_c[PFX)
   91     1  1102    95 1.4334e+00  3.5e-08 SB 0.0e+00 1.0e+00 (m_c[PFX)
   92     1  1129    96 1.2656e+00  5.4e-05 SG 0.0e+00 1.0e+00 (m_c[PFX)
   93     1  1157    97 1.1687e+00  1.5e-06 SG 0.0e+00 1.0e+00 (m_c[PFX)
   94     1  1186    98 1.1666e+00  4.3e-08 SG 0.0e+00 1.0e+00 (m_c[PFX)
   95     1  1215    99 1.1646e+00  4.3e-08 SG 0.0e+00 1.0e+00 (m_c[PFX)

Restart Log
proximal_perturbation 0
crash_method pnewton
crash_nbchange_limit 10
nms_initial_reference_factor 2
crash_searchtype arc
nms_searchtype arc
gradient_searchtype arc
lemke_search_type slack

Crash Log
major  func  diff  size  residual    step       prox   (label)
    0     0             1.4567e+00             0.0e+00 (m_c[PFX)
    1     4     0     9 1.2020e+00  4.1e-01    0.0e+00 (m_c[PDD)
    2     8     1     9 1.0783e+00  4.1e-01    0.0e+00 (m_c[PDD)
    3    20     1     8 1.0783e+00  5.4e-05    0.0e+00 (m_c[PDD)
    4    27     0     9 1.0670e+00  6.9e-02    0.0e+00 (m_c[PDD)
    5    36     0     9 1.0652e+00  1.2e-02    0.0e+00 (m_c[PDD)
    6    46     0     9 1.0649e+00  1.9e-03    0.0e+00 (m_c[PDD)
    7    56     0     9 1.0646e+00  1.9e-03    0.0e+00 (m_c[PDD)
    8    67     0     9 1.0646e+00  3.2e-04    0.0e+00 (m_c[PDD)
    9    78     0     9 1.0645e+00  3.2e-04    0.0e+00 (m_c[PDD)
   10    89     0     9 1.0645e+00  3.2e-04    0.0e+00 (m_c[PDD)
pn_search terminated: no basis change.

Major Iteration Log
major minor  func  grad  residual    step  type prox    inorm  (label)
   95     0  1334   110 1.0645e+00           R 0.0e+00 8.5e-01 (m_c[PDD)
   96     2  1335   111 1.0645e+00  1.0e+00 RM 0.0e+00 8.5e-01 (m_c[PDD)
   97     5  1336   112 1.0645e+00  1.0e+00 RM 0.0e+00 8.5e-01 (m_c[PDD)
   98     2  1337   113 1.0645e+00  1.0e+00 RM 0.0e+00 8.5e-01 (m_c[PDD)
   99     5  1338   114 1.0645e+00  1.0e+00 RM 0.0e+00 8.5e-01 (m_c[PDD)
  100     2  1339   115 1.0645e+00  1.0e+00 RM 0.0e+00 8.5e-01 (m_c[PDD)
  101     8  1352   116 1.0644e+00  5.4e-05 RG 0.0e+00 8.5e-01 (m_c[PDD)
  102     4  1353   117 1.0644e+00  1.0e+00 RM 0.0e+00 8.5e-01 (m_c[PDD)
  103     6  1354   118 1.0642e+00  1.0e+00 RM 0.0e+00 8.5e-01 (m_c[PDD)
  104     4  1355   119 1.0642e+00  1.0e+00 RM 0.0e+00 8.5e-01 (m_c[PDD)
  105     4  1356   120 1.0642e+00  1.0e+00 RM 0.0e+00 8.5e-01 (m_c[PDD)
  106     8  1366   121 1.0630e+00  9.2e-03 RB 0.0e+00 8.5e-01 (m_c[PDD)
  107     4  1381   122 1.0629e+00  4.3e-08 RG 0.0e+00 8.5e-01 (m_c[PDD)
  108     3  1382   123 1.0629e+00  1.0e+00 RM 0.0e+00 8.5e-01 (m_c[PDD)
  109     4  1394   124 1.0629e+00  2.6e-04 RB 0.0e+00 8.5e-01 (m_c[PDD)
  110     3  1396   125 1.0629e+00  8.0e-01 RB 0.0e+00 8.5e-01 (m_c[PDD)
  111     8  1406   126 1.0622e+00  9.2e-03 RB 0.0e+00 8.5e-01 (m_c[PDD)
  112     4  1407   127 1.0622e+00  1.0e+00 RM 0.0e+00 8.5e-01 (m_c[PDD)
  113     3  1422   128 1.0619e+00  4.3e-08 RG 0.0e+00 8.5e-01 (m_c[PDD)
  114     3  1423   129 1.0619e+00  1.0e+00 RM 0.0e+00 8.5e-01 (m_c[PDD)
  115     3  1425   130 1.0619e+00  8.0e-01 RB 0.0e+00 8.5e-01 (m_c[PDD)
  116     8  1435   131 1.0616e+00  9.2e-03 RB 0.0e+00 8.4e-01 (m_c[PDD)
  117     4  1436   132 1.0616e+00  1.0e+00 RM 0.0e+00 8.4e-01 (m_c[PDD)
  118     3  1438   133 1.0616e+00  8.0e-01 RB 0.0e+00 8.4e-01 (m_c[PDD)
  119     4  1453   134 1.0612e+00  4.3e-08 RG 0.0e+00 8.4e-01 (m_c[PDD)
  120     3  1454   135 1.0612e+00  1.0e+00 RM 0.0e+00 8.4e-01 (m_c[PDD)
  121     8  1464   136 1.0611e+00  9.2e-03 RB 0.0e+00 8.4e-01 (m_c[PDD)
  122     4  1467   137 1.0611e+00  6.4e-01 RB 0.0e+00 8.4e-01 (m_c[PDD)
  123     3  1469   138 1.0611e+00  8.0e-01 RB 0.0e+00 8.4e-01 (m_c[PDD)
  124     4  1481   139 1.0611e+00  2.6e-04 RB 0.0e+00 8.4e-01 (m_c[PDD)
  125     3  1496   140 1.0607e+00  4.3e-08 RG 0.0e+00 8.4e-01 (m_c[PDD)
  126     8  1506   141 1.0609e+00  9.2e-03 RB 0.0e+00 8.4e-01 (m_c[PDD)

Major Iterations. . . . 126
Minor Iterations. . . . 385
Restarts. . . . . . . . 3
Crash Iterations. . . . 11
Gradient Steps. . . . . 24
Function Evaluations. . 1535
Gradient Evaluations. . 141
Basis Time. . . . . . . 0.000861
Total Time. . . . . . . 0.068525
Residual. . . . . . . . 1.060652e+00
Postsolved residual: 1.0607e+00


Solver Status: SLOW_PROGRESS
Model Status: UNKNOWN_RESULT_STATUS</code></pre><p>The issue appears to be related to the use of subexpressions in PATHSolver. Both the NLP and MCP models without subexpressions solve fine, while both models with subexpressions fail to solve.</p><h2 id="Temporary-Solution"><a class="docs-heading-anchor" href="#Temporary-Solution">Temporary Solution</a><a id="Temporary-Solution-1"></a><a class="docs-heading-anchor-permalink" href="#Temporary-Solution" title="Permalink"></a></h2><p>One way to solve this is to slowly approach the counterfactual by solving the model multiple times with smaller shocks. This is known as &quot;parameter homotopy&quot; or &quot;path-following&quot;. Below is an example of how to do this.</p><p>The following is a function allowing us to set the value of <code>elas_transformation</code> without changing the other parameters.</p><pre><code class="language-julia hljs">transformation_shock(x) = ModelParameters(
    elas_substitution = .2,
    elas_transformation = x,
    balance_of_payments = 10,
    price_world_export = 1.2,
    price_world_import = 1.1,
    tax_domestic = .5,
    subsidy_export = .2,
    tax_import = .1
    )</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">transformation_shock (generic function with 1 method)</code></pre><p>We are going to solve the model many times, so it&#39;s a good idea to set it to silent mode.</p><pre><code class="language-julia hljs">set_silent(mpsge)</code></pre><p>Now we can loop over a range of values for <code>elas_transformation</code>, gradually increasing it to the target value.</p><pre><code class="language-julia hljs">for param in transformation_shock.(1:15)
    set_parameter_values(mpsge, param)
    solve!(mpsge)

    jm = jump_model(mpsge)
    set_start_value.(all_variables(jm), value.(all_variables(jm)))

    println(&quot;Omega=$(param.elas_transformation): Solved = $(is_solved_and_feasible(jm))&quot;)

end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Omega=1.0: Solved = true
Omega=2.0: Solved = true
Omega=3.0: Solved = true
Omega=4.0: Solved = true
Omega=5.0: Solved = true
Omega=6.0: Solved = true
Omega=7.0: Solved = true
Omega=8.0: Solved = true
Omega=9.0: Solved = true
Omega=10.0: Solved = true
Omega=11.0: Solved = true
Omega=12.0: Solved = true
Omega=13.0: Solved = true
Omega=14.0: Solved = true
Omega=15.0: Solved = true</code></pre><p>A couple of notes. First, the <code>all_variables</code> function is defined in MPSGE, but it does not grab all the variables, just the ones that are explicitly defined. By using first extracting the JuMP model using <code>jump_model</code>, we can use <code>all_variables</code> from JuMP, which grabs all variables including subexpressions. I plan to add a keyword to <code>all_variables</code> in MPSGE to allow this behavior directly in the future.</p><p>Second, this approach may not always work. It depends on the model and the size of the shock. However, it is a useful technique to have in your toolbox when dealing with difficult-to-solve models.</p><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../compare/">« Comparing Models</a><a class="docs-footer-nextpage" href="../docs/">API Reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.15.0 on <span class="colophon-date" title="Friday 7 November 2025 16:05">Friday 7 November 2025</span>. Using Julia version 1.12.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
